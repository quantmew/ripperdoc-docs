---
title: 配置
description: 配置 Ripperdoc 的模型与行为
---

Ripperdoc 可以通过配置文件或环境变量进行设置。

## 配置文件

配置按优先级顺序加载：

1. **全局**：`~/.ripperdoc.json`
2. **项目**：`.ripperdoc/config.json`

项目配置会覆盖全局配置。

## 模型配置

### 基础模型设置

```json
{
  "model_profiles": {
    "default": {
      "provider": "openai_compatible",
      "model": "deepseek-chat",
      "api_key": "YOUR_DEEPSEEK_KEY",
      "api_base": "https://api.deepseek.com",
      "max_tokens": 4096,
      "temperature": 0.0
    }
  },
  "model_pointers": {
    "main": "default",
    "quick": "default"
  }
}
```

### 多模型

可以定义多个模型配置：

```json
{
  "model_profiles": {
    "default": {
      "provider": "openai_compatible",
      "model": "deepseek-chat",
      "api_key": "YOUR_DEEPSEEK_KEY",
      "api_base": "https://api.deepseek.com"
    },
    "reasoner": {
      "provider": "openai_compatible",
      "model": "deepseek-reasoner",
      "api_key": "YOUR_DEEPSEEK_KEY",
      "api_base": "https://api.deepseek.com",
      "thinking_mode": "deepseek"
    },
    "local": {
      "provider": "openai_compatible",
      "model": "llama3.2",
      "api_base": "http://localhost:11434/v1",
      "api_key": null
    }
  },
  "model_pointers": {
    "main": "default",
    "quick": "reasoner"
  }
}
```

使用 `/models` 命令或 `--model` 参数切换配置（使用 `model_profiles` 中的名字）：

```bash
ripperdoc --model fast
```

### 提供商选项

| Provider | 必需环境变量 | API Base |
|----------|-----------------|----------|
| `openai_compatible` | 依具体提供商而定 | 依具体提供商而定（例如 `https://api.deepseek.com`） |
| `anthropic` | `ANTHROPIC_API_KEY` | `https://api.anthropic.com` |
| `gemini` | `GEMINI_API_KEY` | Google AI API |

### 自定义 API 端点

针对 OpenAI 兼容接口：

```json
{
  "model_profiles": {
    "custom": {
      "provider": "openai_compatible",
      "api_base": "https://your-api-endpoint.com/v1",
      "api_key": "YOUR_CUSTOM_KEY",
      "model": "your-model-name"
    }
  },
  "model_pointers": {
    "main": "custom",
    "quick": "custom"
  }
}
```

## Thinking 模式

针对支持扩展思考的模型（DeepSeek、带扩展思考的 Claude）：

```json
{
  "model_profiles": {
    "reasoning": {
      "provider": "openai_compatible",
      "model": "deepseek-reasoner",
      "api_key": "YOUR_DEEPSEEK_KEY",
      "api_base": "https://api.deepseek.com",
      "thinking_mode": "deepseek"
    }
  },
  "model_pointers": {
    "main": "reasoning",
    "quick": "reasoning"
  }
}
```

## 权限设置

```json
{
  "permissions": {
    "mode": "default",
    "rules": []
  }
}
```

详细配置参见 [权限](/zh-CN/docs/permissions)。

## CLI 参数

| 参数 | 说明 |
|--------|-------------|
| `--model NAME` | 使用指定模型配置 |
| `--yolo` | 跳过权限确认 |
| `--verbose` | 启用详细输出 |
| `--max-thinking-tokens N` | 设置最大思考 token 数 |

## 环境变量

API key 可以直接写在配置文件里。环境变量是可选的，也可以用来替代。

| 变量 | 说明 |
|----------|-------------|
| `ANTHROPIC_API_KEY` | 如果已在配置里设置 `api_key` 则可选 |
| `OPENAI_API_KEY` | 如果已在配置里设置 `api_key` 则可选 |
| `DEEPSEEK_API_KEY` | 如果已在配置里设置 `api_key` 则可选 |
| `GEMINI_API_KEY` | 如果已在配置里设置 `api_key` 则可选 |
| `RIPPERDOC_MAX_RETRIES` | API 最大重试次数（默认：10） |
| `RIPPERDOC_API_TIMEOUT` | API 超时时间（秒，默认：120） |

完整列表参见 [环境变量](/zh-CN/docs/environment-variables)。
